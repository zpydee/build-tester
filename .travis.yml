language: node_js

node_js:
  - "7.8"

# services:
#   - docker

# branches:
#  only:
#    - master


before_install:
  - npm install -g mocha chai

install:
  - npm install;

script:
  - npm run test;

after_script:
  - if [ "$TRAVIS_BRANCH" == "master" ]; then
    export BRANCH_TAG = "latest"; else
    export BRANCH_TAG = $TRAVIS_BRANCH;
    fi
  - export COMMIT_TAG = ${TRAVIS_COMMIT::7}
  - echo BRANCH_TAG
  - echo COMMIT_TAG


# after_success:
#   - '[ "$TRAVIS_PULL_REQUEST" = "false" ] && [ "$TRAVIS_BRANCH" = "master" ] &&  curl --data build=true docker_tag=$TRAVIS_TAG -X POST $DOCKER_BUILD_URL'

# after_success:
#   - if [ "$TRAVIS_BRANCH" == "master" ]; then
#    docker login -u="$DOCKER_USERNAME" -p="$DOCKER_PASSWORD";
#    docker build -t zpydee/build-tester:$TRAVIS_TAG .;
#    docker push zpydee/build-tester:$TRAVIS_TAG;
#    fi

# after success: